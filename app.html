<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kopiko Blanca Sponsor Task</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background-color: #FFFFFF;
            color: #1A3C34;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        .promo-ended {
            text-align: center;
            padding: 50px;
            font-size: 2rem;
            color: #D32F2F;
            font-weight: 700;
            background-color: #F5F5F5;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .countdown-timer {
            text-align: center;
            padding: 20px;
            background-color: #D32F2F;
            color: #FFFFFF;
            font-size: 1.5rem;
            font-weight: 700;
            position: sticky;
            top: 0;
            z-index: 1002;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .winner-banner {
            background-color: #E8F0E9;
            color: #1A3C34;
            padding: 10px 0;
            font-size: 1rem;
            font-weight: 500;
            text-align: center;
            overflow: hidden;
            white-space: nowrap;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 50px;
            z-index: 1001;
        }
        .winner-banner p {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 15s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        .user-reviews {
            margin: 40px 0;
            text-align: center;
        }
        .user-reviews h2 {
            font-size: 2rem;
            color: #1A3C34;
            margin-bottom: 20px;
            font-weight: 700;
        }
        .review-box {
            background: #FFFFFF;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }
        .review-box small {
            display: block;
            font-size: 0.8rem;
            color: #666;
        }
        .comment-section {
            margin: 20px 0;
            text-align: center;
        }
        .comment-section input {
            padding: 10px;
            width: 80%;
            max-width: 500px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
        }
        .comment-section button {
            background-color: #1A3C34;
            color: #FFFFFF;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s ease;
        }
        .comment-section button:hover {
            background-color: #2E7D32;
        }
        .sponsor-logos {
            text-align: center;
            margin: 40px 0;
            background-color: #F5F5F5;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        .sponsor-logos p {
            font-size: 1.1rem;
            color: #2E7D32;
            margin-bottom: 15px;
        }
        .sponsor-logos .logos {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        .sponsor-logos .logos img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }
        .sponsor-logos .legitimacy-text {
            font-size: 0.9rem;
            color: #1A3C34;
            margin-top: 15px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .instructions {
            margin: 60px 0 40px;
            text-align: center;
            background-color: #F5F5F5;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }
        .instructions h2 {
            font-size: 2rem;
            color: #1A3C34;
            margin-bottom: 20px;
            font-weight: 700;
        }
        .step {
            display: flex;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: #FFFFFF;
            border-left: 4px solid #1A3C34;
            border-radius: 4px;
        }
        .step-number {
            font-size: 2rem;
            font-weight: 700;
            color: #1A3C34;
            margin-right: 15px;
        }
        .step-text {
            font-size: 1.1rem;
            color: #2E7D32;
        }
        .download-section {
            text-align: center;
            margin: 40px 0;
            background-color: #F5F5F5;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        .download-section h3 {
            font-size: 1.5rem;
            color: #1A3C34;
            margin-bottom: 10px;
        }
        .download-section p {
            font-size: 1rem;
            color: #D32F2F;
            margin-bottom: 20px;
            font-weight: 500;
        }
        .download-section a {
            display: inline-block;
            background-color: #1A3C34;
            color: #FFFFFF;
            padding: 12px 24px;
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1rem;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease;
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        .download-section a:hover {
            background-color: #2E7D32;
        }
        .download-section small {
            display: block;
            font-size: 0.9rem;
            color: #D32F2F;
            margin-top: 10px;
        }
        .sponsored-app {
            text-align: center;
            margin: 40px 0;
            background-color: #F5F5F5;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        .sponsored-app h2 {
            font-size: 2rem;
            color: #1A3C34;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .sponsored-app p {
            font-size: 1.1rem;
            color: #D32F2F;
            margin-bottom: 20px;
        }
        .sponsored-app span.highlight {
            font-weight: bold;
            color: #1A3C34;
        }
        .sponsored-app-image {
            max-width: 300px;
            width: 100%;
            height: auto;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        .upload-section {
            margin: 40px 0;
            text-align: center;
            background-color: #F5F5F5;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            position: relative;
        }
        .upload-section input[type="file"] {
            margin: 10px 0;
        }
        .upload-section button {
            background-color: #1A3C34;
            color: #FFFFFF;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .upload-section button:hover {
            background-color: #2E7D32;
        }
        .upload-section button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .edit-button {
            display: inline-block;
            text-align: left;
            font-size: 0.8rem;
            color: #1A3C34;
            text-decoration: underline;
            cursor: pointer;
            margin-top: 10px;
        }
        .loading {
            display: none;
            font-size: 1.2rem;
            color: #1A3C34;
            margin: 20px 0;
        }
        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #1A3C34;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        .small-loading::after {
            content: '';
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid #1A3C34;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-left: 5px;
            vertical-align: middle;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        @keyframes heartbeat {
            0% { transform: scale(1); }
            20% { transform: scale(1.2); }
            40% { transform: scale(1); }
            60% { transform: scale(1.2); }
            80% { transform: scale(1); }
            100% { transform: scale(1); }
        }
        .gcash-section {
            display: none;
            margin: 20px 0;
            text-align: center;
        }
        .gcash-section input {
            padding: 10px;
            margin: 10px 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
        }
        .gcash-section button {
            background-color: #1A3C34;
            color: #FFFFFF;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .gcash-section button:hover {
            background-color: #2E7D32;
        }
        .receipt-section {
            margin: 20px 0;
            text-align: left;
            background-color: #FFFFFF;
            padding: 20px;
            border: 1px solid #1A3C34;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }
        .receipt-section h3 {
            font-size: 1.2rem;
            color: #1A3C34;
            margin-bottom: 10px;
        }
        .receipt-section p {
            font-size: 0.9rem;
            color: #1A3C34;
            margin: 5px 0;
        }
        .receipt-section .personal-details p {
            font-weight: bold;
            font-size: 0.9rem;
        }
        .receipt-section .processing-status {
            font-size: 0.8rem;
            color: #2E7D32;
            margin-top: 10px;
        }
        .receipt-section .processing-status::before {
            content: '‚è≥';
            margin-right: 5px;
        }
        .receipt-section .submitted-status::before {
            content: '‚úÖ';
            margin-right: 5px;
        }
        .receipt-section .failed-status {
            font-size: 0.8rem;
            color: #D32F2F;
            margin-top: 10px;
        }
        .receipt-section .failed-status::before {
            content: '‚ùå';
            margin-right: 5px;
        }
        .receipt-section hr {
            border: 0;
            border-top: 1px solid #1A3C34;
            margin: 10px 0;
        }
        .error-message {
            color: #D32F2F;
            font-size: 1rem;
            margin: 10px 0;
        }
        .success-message {
            color: #2E7D32;
            font-size: 1rem;
            margin: 10px 0;
        }
        .footer {
            background-color: #F5F5F5;
            color: #1A3C34;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            font-size: 0.9rem;
            border-top: 1px solid #E0E0E0;
        }
        @media (max-width: 768px) {
            .step { flex-direction: column; text-align: center; }
            .sponsor-logos .logos img { width: 60px; height: 60px; }
            .countdown-timer { font-size: 1.2rem; }
            .sponsored-app-image { max-width: 200px; }
        }
    </style>
</head>
<body>
    <div id="page-content">
        <!-- Promo Ended Message (Hidden by Default) -->
        <div id="promo-ended" class="promo-ended" style="display: none;">
            Promo Ended
        </div>

        <!-- Main Content (Shown if Promo is Active) -->
        <div id="main-content">
            <!-- Countdown Timer -->
            <div class="countdown-timer" id="big-countdown">PROMO IS ENDING SOON!</div>

            <!-- Scrolling Winner Banner -->
            <div class="winner-banner">
                <p id="winner-text">üéâ Congratulations to U****N for successfully receiving 500 pesos!</p>
            </div>

            <!-- Main Content -->
            <div class="container">
                <!-- Sponsored App Section -->
                <div class="sponsored-app">
                    <h2>Sponsored App</h2>
                    <img src="https://i.ibb.co/zWHyh1s5/IMG-20250822-185424.png" alt="Sponsored App Image" title="Edit this image later" class="sponsored-app-image">
                    <p>Samahan mo kami, Ka-Kopiko! I-download ang aming sponsor app at magkaroon ng pagkakataong makakuha ng <span class="highlight">LIBRENG 500 PESOS</span>! Huwag palampasin ang pagkakataong ito‚Äîi-click ang download button ngayon at simulan ang iyong pagkakataon!</p>
                </div>

                <!-- Sponsor Logos Section -->
                <div class="sponsor-logos">
                    <p>Sponsored by the following:</p>
                    <div class="logos">
                        <img src="https://i.ibb.co/S4mvRvGD/philea-about-logo.png" alt="Phelia company" title="philea">
                        <img src="https://i.ibb.co/QFxNW68Q/download-2.png" alt="Kopiko" title="Logo for StarLink Corp">
                        <img src="https://i.ibb.co/YTF40Kt6/download.jpg" alt="Lunar Innovations" title="Logo for Lunar Innovations">
                        <img src="https://i.ibb.co/cSmMG65d/download-2.png" alt="Lunar Innovations" title="Logo for Lunar Innovations">
                        <img src="https://i.ibb.co/5Xhh8hbp/download-3.png" alt="Orbit Solutions" title="Logo for Orbit Solutions">
                    </div>
                    <p class="legitimacy-text">Ang promosyong ito ay opisyal na inaprubahan ng Department of Trade and Industry (DTI) sa ilalim ng DTI Fair Trade Permit No. FTEB-00193743 Series of 2025. Kami ay nakipagtulungan sa mga pinagkakatiwalaang kumpanya upang matiyak ang maayos at lehitimong proseso para sa lahat ng mga kalahok. Sumali na at maging bahagi ng aming komunidad ng mga nanalo!</p>
                </div>

                <!-- Instructions -->
                <div class="instructions">
                    <h2>Step-by-Step Instructions</h2>
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-text">I-download ang sponsor app mula sa link sa ibaba.</div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-text">I-install ang app sa iyong device at buksan ito.</div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-text">Mag-sign in sa app gamit ang iyong Google account.</div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-text">Mag-withdraw at kumuha ng screenshot ng iyong successful na pag withdraw.</div>
                    </div>
                    <div class="step">
                        <div class="step-number">5</div>
                        <div class="step-text">I-upload ang screenshot sa ibaba para sa beripikasyon.</div>
                    </div>
                </div>

                <!-- Download Section -->
                <div class="download-section">
                    <h3>I-Download ang Sponsor App</h3>
                    <p>Ka-Kopiko, i-download na ang app at makakuha ng LIBRENG 500 PESOS!</p>
                    <a href="https://s.hifamiapp.com/1/WWsJajWho" target="_blank" id="download-button">I-Download Ngayon</a>
                    <small>Sponsored by our partner SPACEZ TECHNOLOGY</small>
                </div>

                <!-- Upload Section -->
                <div class="upload-section">
                    <h3>I-upload ang Iyong Screenshot</h3>
                    <p>Isang device lang bawat account. I-upload ang screenshot ng naka-install na app at sign-in proof.</p>
                    <input type="file" id="screenshot-upload" accept="image/*">
                    <button id="upload-button" disabled>I-upload</button>
                    <div id="edit-button" class="edit-button" style="display: none;">Request Edit</div>
                    <div id="error-message" class="error-message"></div>
                    <div id="loading-upload" class="loading">Uploading...</div>
                    <div id="success-message" class="success-message"></div>
                </div>

                <!-- GCash Input Section -->
                <div class="gcash-section" id="gcash-section">
                    <h3>Ipasok ang Iyong Detalye ng GCash</h3>
                    <label for="gcash-number">GCash Number (Format: 09XXXXXXXXX):</label><br>
                    <input type="text" id="gcash-number" placeholder="09XXXXXXXXX" maxlength="11"><br>
                    <label for="gcash-number-confirm">Kumpirmahin ang GCash Number:</label><br>
                    <input type="text" id="gcash-number-confirm" placeholder="09XXXXXXXXX" maxlength="11"><br>
                    <label for="gcash-name">Pangalan:</label><br>
                    <input type="text" id="gcash-name" placeholder="Pangalan"><br>
                    <button id="gcash-submit">Isumite</button>
                    <div id="loading-gcash" class="loading">Processing...</div>
                    <div id="gcash-success" class="success-message"></div>
                </div>

                <!-- Receipt Section -->
                <div class="receipt-section" id="receipt-section" style="display: none;">
                    <h3>Receipt üßæ</h3>
                    <p id="receipt-message" style="font-size: 0.9rem;"></p>
                    <hr>
                    <div class="personal-details">
                        <p id="receipt-gcash-number"></p>
                        <p id="receipt-gcash-name"></p>
                        <p id="receipt-date"></p>
                        <p id="transaction-id"></p>
                        <p id="waiting-line"></p>
                    </div>
                    <p id="expected-time" style="font-size: 0.9rem;">Expected time to be processed: 7 days</p>
                    <div id="status-text" class="processing-status">Processing<span class="small-loading"></span></div>
                </div>

                <!-- User Reviews -->
                <div class="user-reviews" id="user-reviews">
                    <h2>User Reviews</h2>
                    <div class="review-box">A****y says: "Salamat, natanggap ko na yung 500 pesos. #legit #kopiko"<small>August</small></div>
                    <div class="review-box">J****n says: "Okay nadin, natanggap ko na yung reward. may free 500 pesos sila kaya sulit! #kopiko"<small>August</small></div>
                    <div class="review-box">R****a says: "Grabe, naka 1000 pesos ako dalawa kasi Google account ko! #legit"<small>August</small></div>
                    <div class="review-box">K****e says: "Madali lang yung steps, natanggap ko na yung 500 pesos ko. #kopiko"<small>August</small></div>
                    <div class="review-box">T****o says: "Salamat sa promo, pwedeng pang load #legit"<small>August</small></div>
                    <div class="review-box">P****i says: "Legit yung 500 pesos, natanggap ko na. Subukan niyo rin! #kopiko"<small>August</small></div>
                    <div class="review-box">S****d says: "Wow, ang bilis nung 500 pesos! Salamat, Kopiko! #legit"<small>August</small></div>
                    <div class="review-box">B****y says: "Nakuha ko na yung 500 pesos, salamat sa ganitong papromo Kopiko! #kopiko"<small>August</small></div>
                    <div class="review-box">L****m says: "Okay yung proseso, pwede din pala maya dito. #legit"<small>August</small></div>
                    <div class="review-box">F****a says: "Sobrang saya ko, dumating na yung 500 pesos salamat po. #kopiko"<small>August</small></div>
                    <div class="review-box">G****o says: "Salamat, ang bilis ng verification! Sulit sumali! #legit"<small>August</small></div>
                    <div class="review-box">H****i says: "Nakuha ko na yung 500 pesos, salamat sa Kopiko! #kopiko"<small>August</small></div>
                    <div class="review-box">C****e says: "Legit yung promo, natanggap ko na yung reward ko. #legit"<small>August</small></div>
                    <div class="review-box">V****u says: "Salamat, nakuha ko na yung 500 pesos. Try niyo na rin! #kopiko"<small>August</small></div>
                    <div class="review-box">Z****x says: "Okay na okay, natanggap ko na yung 500 pesos! #legit"<small>August</small></div>
                    <div class="review-box">Q****w says: "Sobrang saya ko nung natanggap ko yung 500 pesos! #kopiko"<small>August</small></div>
                    <div class="review-box">D****r says: "Salamat sa 500 pesos! #legit"<small>August</small></div>
                    <div class="review-box">N****k says: "Natanggap ko na yung reward, Salamat! #kopiko"<small>August</small></div>
                    <div class="review-box">W****p says: "Ang bilis lang talaga, nakuha ko na yung 500 pesos! #legit"<small>August</small></div>
                    <div class="review-box">Y****t says: "Salamat, legit yung 500 pesos. Sulit sumali dito! #kopiko"<small>August</small></div>
                    <div class="review-box">J****h says: "Nakuha ko na yung 500 pesos, thanks! #legit"<small>August</small></div>
                    <div class="review-box">M****s says: "Legit na legit yung promo, natanggap ko na! #kopiko"<small>August</small></div>
                    <div class="review-box">L****f says: "Salamat, natanggap ko na yung 500 pesos ko! #legit"<small>August</small></div>
                    <div class="review-box">P****g says: "Ang galing, madali lang yung steps. Try niyo! #kopiko"<small>August</small></div>
                    <div class="review-box">K****j says: "Salamat sa 500 pesos, sobrang happy ako! #legit"<small>August</small></div>
                    <div class="review-box">T****b says: "Nakuha ko na yung reward, salamat talaga! #kopiko"<small>August</small></div>
                    <div class="review-box">R****z says: "Sobrang ganda nung promo, nakuha ko na yung 500 pesos! #legit"<small>August</small></div>
                    <div class="review-box">M****l says: "I'm happy kahit na 500 lang sia! Legit to! #kopiko"<small>August</small></div>
                    <div class="review-box">S****n says: "Natanggap ko na yung 500 pesos, tips lang guys kung may isa pa kayong cellphone pwede kayo mag download dun para maging 1000 pesos #legit"<small>August</small></div>
                    <div class="review-box">H****m says: "Legit yung reward, salamat sa Kopiko! #kopiko"<small>August</small></div>
                    <div class="review-box">E****r says: "Super happy ako kasi nakuha ko na yung 500 pesos! #legit #kopiko"<small>August</small></div>
                    <div class="review-box">I****p says: "Grabe, shocked ako na libre talaga yung 500 pesos! #kopiko #legit"<small>August</small></div>
                    <div class="review-box">O****t says: "Hinihintay ko pa yung prize, sana dumating na! #kopiko"<small>August</small></div>
                    <div class="review-box">X****v says: "Ang saya kasi libre yung 500 pesos, natanggap ko na! #legit #kopiko"<small>August</small></div>
                    <div class="review-box">Y****q says: "Still waiting for my 500 pesos, pero mukhang legit naman. #kopiko"<small>August</small></div>
                    <div id="user-comments"></div>
                </div>

                <!-- Comment Submission Section -->
                <div class="comment-section">
                    <h3>Mag-iwan ng Komento</h3>
                    <input type="text" id="comment-input" placeholder="I-type ang iyong komento dito..." maxlength="100"><br>
                    <button id="comment-submit">Isumite ang Komento</button>
                    <div id="comment-error" class="error-message"></div>
                </div>

                <!-- Footer -->
                <footer class="footer">
                    <p>Official promo sponsor website. In accordance with DTI Fair Trade Permit No. FTEB-00193743 Series of 2025.</p>
                </footer>
            </div>
        </div>
    </div>

    <script>
        // Check if promo has ended
        const endDate = new Date('September 1, 2025 00:00:00');
        const now = new Date();
        const promoEnded = now >= endDate;

        let hasDownloaded = localStorage.getItem('hasDownloaded') === 'true';
        let hasSubmitted = localStorage.getItem('hasSubmitted') === 'true';
        let hasEdited = localStorage.getItem('hasEdited') === 'true';
        let hasSubmittedDetails = localStorage.getItem('hasSubmittedDetails') === 'true';
        let gcashNumber = localStorage.getItem('gcashNumber') || '';
        let gcashName = localStorage.getItem('gcashName') || '';
        let transactionId = localStorage.getItem('transactionId') || '';
        let submissionTime = localStorage.getItem('submissionTime') ? parseInt(localStorage.getItem('submissionTime')) : null;

        // Initialize user comments from localStorage
        let userComments = JSON.parse(localStorage.getItem('userComments')) || [];

        // Function to display user comments (max 3)
        function displayComments() {
            const commentContainer = document.getElementById('user-comments');
            commentContainer.innerHTML = '';
            userComments.slice(-3).forEach((comment) => {
                const reviewBox = document.createElement('div');
                reviewBox.className = 'review-box';
                reviewBox.innerHTML = `KopikoUser10 says: "${comment}" <small>August</small>`;
                commentContainer.appendChild(reviewBox);
            });
        }

        // Function to calculate waiting line position
        function calculateWaitingLine(submissionTime) {
            const currentTime = new Date().getTime();
            const tenDays = 10 * 24 * 60 * 60 * 1000; // 10 days in milliseconds
            const initialQueue = 1050;
            if (!submissionTime) return initialQueue;
            const timeElapsed = currentTime - submissionTime;
            if (timeElapsed >= tenDays) return 0;
            // Linearly decrease from 1050 to 0 over 10 days
            const decreasePerMs = initialQueue / tenDays;
            const currentPosition = Math.max(0, Math.floor(initialQueue - (decreasePerMs * timeElapsed)));
            return currentPosition;
        }

        // Function to update receipt status and waiting line
        function updateReceiptStatus() {
            if (hasSubmitted) {
                document.getElementById('edit-button').style.display = hasEdited ? 'none' : 'block';
                document.getElementById('gcash-section').style.display = 'none';
                document.getElementById('receipt-section').style.display = 'block';
                document.getElementById('receipt-message').textContent = 'Mangyaring asahan ang pagkaantala sa pagproseso ng iyong mga detalye habang bineberipika namin ang iyong account.';
                document.getElementById('transaction-id').textContent = `Transaction ID: ${transactionId}`;
                document.getElementById('receipt-gcash-number').textContent = `GCash Number: ${gcashNumber}`;
                document.getElementById('receipt-gcash-name').textContent = `Name: ${gcashName}`;
                document.getElementById('receipt-date').textContent = `Submitted on: August 22, 2025, 06:27 PM`;

                const currentTime = new Date().getTime();
                const oneHour = 60 * 60 * 1000; // 1 hour in milliseconds
                const sevenDays = 7 * 24 * 60 * 60 * 1000; // 7 days in milliseconds
                const tenDays = 10 * 24 * 60 * 60 * 1000; // 10 days in milliseconds
                const statusElement = document.getElementById('status-text');
                const waitingLineElement = document.getElementById('waiting-line');
                
                const currentPosition = calculateWaitingLine(submissionTime);
                waitingLineElement.textContent = `Waiting Line Position: ${currentPosition}/1,050`;

                if (submissionTime && (currentTime - submissionTime) >= tenDays) {
                    statusElement.className = 'failed-status';
                    statusElement.innerHTML = 'FAILED Sorry, but your request is declined. You didn\'t meet user standard.';
                } else if (submissionTime && (currentTime - submissionTime) >= oneHour) {
                    statusElement.className = 'submitted-status';
                    statusElement.innerHTML = 'Submitted';
                } else {
                    statusElement.className = 'processing-status';
                    statusElement.innerHTML = 'Processing<span class="small-loading"></span>';
                }
            }
        }

        // Enable upload button if hasDownloaded is true
        if (hasDownloaded && !hasSubmittedDetails) {
            document.getElementById('upload-button').disabled = false;
        } else if (hasSubmittedDetails) {
            document.getElementById('upload-button').disabled = true;
        }

        updateReceiptStatus();
        displayComments();

        if (promoEnded) {
            // Show only the "Promo Ended" message
            document.getElementById('promo-ended').style.display = 'flex';
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('big-countdown').style.display = 'none';
        } else {
            // Show the main content and run the countdown timer
            document.getElementById('promo-ended').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';

            // Big Countdown Timer
            function updateBigCountdown() {
                const now = new Date();
                const timeDiff = endDate - now;
                if (timeDiff <= 0) {
                    document.getElementById('big-countdown').innerHTML = 'PROMO HAS ENDED!';
                    document.getElementById('promo-ended').style.display = 'flex';
                    document.getElementById('main-content').style.display = 'none';
                    return;
                }
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);
                document.getElementById('big-countdown').innerHTML = `PROMO IS ENDING SOON! ${days} Days, ${hours} Hours, ${minutes} Minutes, ${seconds} Seconds`;
            }
            updateBigCountdown();
            setInterval(updateBigCountdown, 1000);

            // Check status periodically to update after 1 hour, 7 days, or 10 days
            setInterval(updateReceiptStatus, 60000); // Check every minute

            // Scrolling Banner Randomization
            const usernames = ["J****n", "M****a", "J**N**e", "May*** D**a", "M** M***k", "L** W*k**a", "C** a**o", "S** J**a", "B**** h***j", "C****a"];
            function updateWinnerBanner() {
                const randomUser = usernames[Math.floor(Math.random() * usernames.length)];
                document.getElementById('winner-text').textContent = `üéâ Congratulations to ${randomUser} for successfully receiving 500 pesos!`;
            }
            updateWinnerBanner();
            window.addEventListener('load', updateWinnerBanner);

            // Download Button Detection
            document.getElementById('download-button').addEventListener('click', () => {
                hasDownloaded = true;
                localStorage.setItem('hasDownloaded', 'true');
                if (!hasSubmittedDetails) {
                    document.getElementById('upload-button').disabled = false; // Enable upload button
                }
                document.getElementById('error-message').textContent = '';
            });

            // Upload Button Logic
            document.getElementById('upload-button').addEventListener('click', () => {
                if (!hasDownloaded) {
                    document.getElementById('error-message').textContent = 'I-download muna ang app!';
                    return;
                }
                if (hasSubmitted && !hasEdited) {
                    document.getElementById('error-message').textContent = 'Na-upload mo na ang iyong file! Gamitin ang Request Edit kung nais baguhin.';
                    return;
                }
                const fileInput = document.getElementById('screenshot-upload');
                if (!fileInput.files.length) {
                    document.getElementById('error-message').textContent = 'Pumili muna ng screenshot!';
                    return;
                }
                document.getElementById('loading-upload').style.display = 'block';
                document.getElementById('error-message').textContent = '';
                setTimeout(() => {
                    document.getElementById('loading-upload').style.display = 'none';
                    document.getElementById('gcash-section').style.display = 'block';
                    hasSubmitted = true;
                    localStorage.setItem('hasSubmitted', 'true');
                }, 2000);
            });

            // Request Edit Button Logic
            document.getElementById('edit-button').addEventListener('click', () => {
                if (!hasEdited) {
                    if (confirm('Nais mo bang baguhin ang mga isinumiteng detalye?')) {
                        hasEdited = true;
                        localStorage.setItem('hasEdited', 'true');
                        hasSubmitted = false;
                        hasSubmittedDetails = false;
                        localStorage.setItem('hasSubmitted', 'false');
                        localStorage.setItem('hasSubmittedDetails', 'false');
                        document.getElementById('edit-button').style.display = 'none';
                        document.getElementById('receipt-section').style.display = 'none';
                        document.getElementById('gcash-section').style.display = 'none';
                        localStorage.removeItem('gcashNumber');
                        localStorage.removeItem('gcashName');
                        localStorage.removeItem('transactionId');
                        localStorage.removeItem('submissionTime');
                        document.getElementById('upload-button').disabled = false; // Re-enable upload button after edit
                    }
                }
            });

            // GCash Submit Logic
            document.getElementById('gcash-submit').addEventListener('click', () => {
                const gcashNumberInput = document.getElementById('gcash-number').value;
                const gcashNumberConfirm = document.getElementById('gcash-number-confirm').value;
                const gcashNameInput = document.getElementById('gcash-name').value;
                const gcashRegex = /^09\d{9}$/;
                if (!gcashNumberInput || !gcashRegex.test(gcashNumberInput)) {
                    document.getElementById('gcash-success').textContent = 'Mangyaring maglagay ng wastong GCash number (09XXXXXXXXX)';
                    return;
                }
                if (gcashNumberInput !== gcashNumberConfirm) {
                    document.getElementById('gcash-success').textContent = 'Ang mga GCash number ay hindi tumutugma.';
                    return;
                }
                if (!gcashNameInput) {
                    document.getElementById('gcash-success').textContent = 'Mangyaring maglagay ng pangalan';
                    return;
                }
                document.getElementById('loading-gcash').style.display = 'block';
                document.getElementById('gcash-success').textContent = '';
                setTimeout(() => {
                    document.getElementById('loading-gcash').style.display = 'none';
                    document.getElementById('gcash-section').style.display = 'none';
                    gcashNumber = gcashNumberInput;
                    gcashName = gcashNameInput;
                    transactionId = Math.floor(1000000000 + Math.random() * 9000000000);
                    submissionTime = new Date().getTime();
                    localStorage.setItem('gcashNumber', gcashNumber);
                    localStorage.setItem('gcashName', gcashName);
                    localStorage.setItem('transactionId', transactionId);
                    localStorage.setItem('submissionTime', submissionTime);
                    hasSubmittedDetails = true;
                    localStorage.setItem('hasSubmittedDetails', 'true');
                    document.getElementById('receipt-section').style.display = 'block';
                    document.getElementById('receipt-message').textContent = 'Mangyaring asahan ang pagkaantala sa pagproseso ng iyong mga detalye habang bineberipika natin ang iyong account.';
                    document.getElementById('transaction-id').textContent = `Transaction ID: ${transactionId}`;
                    document.getElementById('receipt-gcash-number').textContent = `GCash Number: ${gcashNumber}`;
                    document.getElementById('receipt-gcash-name').textContent = `Name: ${gcashName}`;
                    document.getElementById('receipt-date').textContent = `Submitted on: August 22, 2025, 06:27 PM`;
                    document.getElementById('waiting-line').textContent = `Waiting Line Position: ${calculateWaitingLine(submissionTime)}/1,050`;
                    document.getElementById('upload-button').disabled = true; // Disable upload button after submission
                    document.getElementById('edit-button').style.display = hasEdited ? 'none' : 'block';
                    updateReceiptStatus();
                }, 5000);
            });

            // Comment Submission Logic
            document.getElementById('comment-submit').addEventListener('click', () => {
                const commentInput = document.getElementById('comment-input').value.trim();
                if (!commentInput) {
                    document.getElementById('comment-error').textContent = 'Mangyaring maglagay ng komento!';
                    return;
                }
                if (userComments.length >= 3) {
                    userComments.shift(); // Remove the oldest comment if there are already 3
                }
                userComments.push(commentInput);
                localStorage.setItem('userComments', JSON.stringify(userComments));
                document.getElementById('comment-input').value = '';
                document.getElementById('comment-error').textContent = '';
                displayComments();
            });
        }
    </script>
</body>
</html>
